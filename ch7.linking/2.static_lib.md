# 静态链接

静态链接将所有相关的库文件和代码合并到一个可执行文件中，相当于直接把库文件嵌入 ELF 里面

静态链接的优点：

1. 独立性：静态链接的可执行文件包含了所有需要的库函数和代码，因此它可以在不依赖外部库的情况下独立运行。这意味着你可以将可执行文件部署到其他计算机上而无需安装额外的库文件。

2. 性能：由于所有代码都被编译成一个单一的可执行文件，执行速度通常比动态链接更快。因为在动态链接中，加载和解析库文件需要一些额外的时间，尽管这个差距可能在现代计算机上并不明显。

3. 简化部署：静态链接的可执行文件更容易部署，因为它们不需要关心目标系统上是否存在相应的动态库，避免了动态库版本不匹配的问题。

4. 版本控制：静态链接确保了编译时使用特定版本的库文件，而不会受到目标系统上其他版本库文件的影响。这可以避免因为不同库文件版本之间的不兼容性而导致的问题。

静态链接的缺点：

1. 文件大小：静态链接会导致可执行文件的大小增加，因为它将所有需要的代码都包含在内。这可能会增加磁盘空间和加载时间，尤其是对于大型项目。

2. 更新困难：如果需要更新库文件或修复其中的一个bug，你需要重新编译整个项目，并重新分发可执行文件。这可能不太方便，尤其在大型项目中，重新构建整个项目可能会非常耗时。

3. 内存重复：如果多个程序同时使用相同的库函数，那么静态链接会导致多个程序同时拥有相同的库的副本，浪费内存空间。

4. 编译时间：由于所有代码在编译时都要被合并，所以静态链接可能会导致编译时间增加，特别是在大型项目中。

# 静态库

linux系统中静态库一般被成为archive文件，以 .a 结尾

使用以下指令
```shell
$ ar rcs lib_name.a file_1.o file_2.o 
```
将 object 文件打包成静态库